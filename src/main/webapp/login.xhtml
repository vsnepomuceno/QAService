<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

<h:head>
	<title>QAService ESEG</title>
	<link rel="shortcut icon" href="./resources/images/favicon.ico" />
</h:head>
<h:body>
	<h:graphicImage library="images" name="ESEG_logo.png"
		style="width: 100%" />
	<p:growl id="gro" life="3000" />
	<h:form id="form">
		<p:messages showDetail="true" autoUpdate="true" />
		<p:fieldset style="background-color: transparent;">
			<p:panelGrid columns="2">

				<p:outputLabel value="E-mail*: " />
				<p:inputText id="txtEmail" binding="#{email}" required="true"
					maxlength="50" requiredMessage="E-mail can not be empty!" />

				<p:outputLabel value="Password*: " />
				<p:password id="txtPassword" binding="#{password}" required="true"
					maxlength="15" requiredMessage="Password can not be empty!" />
			</p:panelGrid>
			<br />
			<p:commandButton value="New User" type="button" icon="fa fa-plus"
				onclick="PF('newUser').show();" />
			<p:spacer width="100" height="20" />
			<p:commandButton value="Login" update="form" icon="fa fa-sign-in"
				action="${QAUserModel.login(email.value, password.value)}" />
		</p:fieldset>		
	</h:form>	
	<p:dialog header="New User" widgetVar="newUser" modal="true"
			height="280" resizable="false">
			<h:form id="formDialog">
			<p:panelGrid columns="2">
				<p:outputLabel value="Full Name*: " />
				<p:inputText id="txtFullName" binding="#{name}" required="true"
					maxlength="100" requiredMessage="Name can not be empty!" />

				<p:outputLabel value="E-mail*: " />
				<p:inputText id="txtEmailModal" binding="#{emailNew}"
					required="true" maxlength="50"
					requiredMessage="E-mail can not be empty!" />

				<p:outputLabel value="Password*: " />
				<p:password id="txtPasswordModal" binding="#{passwordNew}"
					required="true" maxlength="15"
					requiredMessage="Password can not be empty!" />

				<p:outputLabel value="Institution Name*: " />
				<p:inputText id="txtInstitutionName" binding="#{instName}"
					required="true" maxlength="50"
					requiredMessage="Institution name can not be empty!" />

				<p:outputLabel value="Institution Country*: " />
				<p:inputText id="txtInstitutionCountry" binding="#{instCountry}"
					required="true" maxlength="50"
					requiredMessage="Institution country can not be empty!" />
			</p:panelGrid>
			<br />
			<p:commandButton value="Confirm" update="@all"
				action="${QAUserModel.registerUser(name.value, emailNew.value, 
				passwordNew.value, instName.value, instCountry.value)}"
				onsuccess="PF('newUser').hide();" />
			</h:form>
		</p:dialog>
	<br />
</h:body>
</html>

